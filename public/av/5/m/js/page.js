if(gwc.checkPage(".main_index")){if(gwc.winWidth<=768){var carouselSlide=$(".banner-carousel .swiper-slide");new Swiper(".banner-carousel .swiper-container",{pagination:".swiper-pagination",paginationClickable:true,loop:true,autoplayDisableOnInteraction:false,autoplay:3000,onSlideChangeStart:function(a){var b=carouselSlide.eq(a.activeIndex).find("img");b.attr("src",b.attr("_src"))}})}var repostFabulous=$(".repost-fabulous");var idsArr=[];if(repostFabulous.length>0){repostFabulous.each(function(){idsArr.push($(this).attr("data-id"))})}if(iswq&&backData.uid){gwc.updateUserLoginState(backData)}else{getAjaxData("&target=index&ids="+idsArr,function(a){if(a.uid){gwc.updateUserLoginState(a);a.issuperpower&&console.log(a)}})}function renderCommentListState(c,b){var a=b.uid;c.forEach(function(f){var e=$(".repost-fabulous-"+f.id);if(f.fb&&f.fb.length>0){var g=f.fb;var d=g.length;if(a){g.forEach(function(h){if(h==a){e.addClass("red");d+=" 已赞"}})}}else{d=0}e.find("em").text(d);if(f.uid==a||b.issuperpower){!e.next().hasClass("delete-reply-btn")&&e.after('<a href="javascript:;" class="red delete-reply-btn" data-id="'+f.id+'" data-uid="'+f.uid+'">删除</a>')}})}if(gwc.winWidth>768){$(".pages-nav").show().appendTo($(".watershed .right-side"))}$(".today_good_btn").click(function(){$(this).addClass("red");if($("#todayGoodFabulousModule").length==0){gwc.appendModule("todayGoodFabulousModule")}else{todayGoodFabulousModule.initCtrl()}});$(".back-new-comment").click(function(){$(this).hide();$(".today_good_btn").removeClass("red");$(".comment-list .new-comment-content").show().parent().find(".good-comment-content").hide()})}else{if(gwc.checkPage(".main_modifyprofile")){$("#avatar_ipt").change(function(){var a=parseInt($(".back_homepage").attr("href").split("/")[2]);gwc.imgUpload($(this),function(b){$.ajax({url:gwc.api2,type:"post",dataType:"json",data:{order:"uploadAvatar",uid:a,imgbig:b.bigImgData,imgsmall:b.smallImgData},success:function(c){gwc.showPrompt(c.tips)}})})})}else{if(gwc.checkPage(".main_user_details")){$(".set_has_read_btn").click(function(){$.ajax({url:gwc.api2,type:"post",dataType:"json",data:{order:"setHasRead"},success:function(a){gwc.showPrompt(a.tips);$(".dynamic .item").removeClass("new").addClass("old");$(".notice .num").text("")},error:function(a){console.log(a)}})});$(".put .tab-nav li").hover(function(){$(this).addClass("active").siblings().removeClass("active");$(".put .list").eq($(this).index()).show().siblings().hide()})}else{if(gwc.checkPage(".main_movie")){if(iswq&&backData.uid){gwc.updateUserLoginState(backData)}else{getAjaxData("",function(a){a.uid&&gwc.updateUserLoginState(a);a.issuperpower&&console.log(a)})}new Swiper(".retrieval-wrap .swiper-container",{slidesPerView:"auto",spaceBetween:0,freeMode:true})}else{if(gwc.checkPage(".main_movie_details")){if(isstatic){if(rp0&&$(".no-play-rs-tips").length==0){$(".main-content>.info").before('<div class="ready-play-tips well mark">正在建立连接请稍等，如长时间未响应请刷新或清缓存试试...</div>')}var localRs=sessionStorage.getItem("haitumlocalRs");localRs=localRs?JSON.parse(localRs):"";var idsStr=Array.isArray(ids)?ids.join("-"):ids;if(localRs&&localRs.ids==idsStr&&localRs.index==rp0){var isBackServerRsData=0;renderTargetRsBoxData(localRs.data,$(".resource-box .rb-item").eq(rp0),rp0,1)}else{isBackServerRsData=1}if(iswq){putStaticInfo(backData,backData.data)}else{getAjaxData("&target=movieDetails&rp0="+rp0+"&rp1="+rp1+"&isBackServerRsData="+isBackServerRsData,function(a){if(gwc.winWidth>768&&!a.issuperpower){a.data.ispass==-1&&(location.href="/404.html")}else{if(a.issuperpower){console.log(a)}}putStaticInfo(a,a.data)})}function putStaticInfo(a,b){b.resource&&renderTargetRsBoxData(b.resource,$(".resource-box .rb-item").eq(rp0),rp0,1);if(rp0&&$("#play_area_box").length==0){$(".ready-play-tips").hide();$("body").append('<script type="text/javascript" src="/template/default/static/plugin/ckplayer/ckplayer/insertPlayBoxModule.js?v=1.1"><\/script>');insertPlayBoxModule.initCtrl(b.url);pageScrollPlayAreaCtrl()}if(a.uid){gwc.updateUserLoginState(a);$(".cover").remove();$(".reply-sbt.reply-post").removeClass("disabled")}if(a.issuperpower){$(".modify-post-btn").length==0&&$(".main-content .title-wrap").after(a.str)}$("#visits_num").show().text(b.visits);$(".updatetime").text("更新时间："+b.updatetime);if(b.fabulous&&b.fabulous.length>0){b.fabulous.forEach(function(c){if(c==a.uid){$(".like .fabulous").addClass("red").find("em").html("<b>"+b.fabulous.length+"</b>已赞")}return false})}if(b.collect&&b.collect.length>0){b.collect.forEach(function(c){if(c==a.uid){$(".like .collect").addClass("red").find("em").html("<b>"+b.collect.length+"</b>已收藏")}return false})}if(a.uid&&b.refabulous){$(".comment-item-list .item").each(function(){var f=$(this);var d=f.index();var e=b.refabulous[d];if(e.fabulous&&e.fabulous.length>0){e.fabulous.forEach(function(g){if(g==a.uid){f.find(".repost-fabulous").addClass("red").find("em").html(e.fabulous.length+"已赞")}})}if(e.uid==a.uid||a.issuperpower){var c=f.find(".repost-fabulous");
    !c.next().hasClass("delete-reply-btn")&&c.after('<a href="javascript:;" class="red delete-reply-btn" data-id="'+e.id+'" data-uid="'+e.uid+'">删除</a>')}})}}}else{pageScrollPlayAreaCtrl()}function pageScrollPlayAreaCtrl(){var d=$(".play_area");if(d.length>0){var b=d.offset().top;var c=$(".resource-box").offset().top;var a=d.height();if(gwc.winWidth<=768){$(window).scroll(function(){if(gwc.docScrollTop>=b){d.addClass("fixedTop");autoPlayBoxHeight()}else{d.removeClass("fixedTop");autoPlayBoxHeight();slideNavAutoPosition(".resource-box-nav .swiper-wrapper")}})}else{$(window).scroll(function(){if(gwc.docScrollTop>=c){d.addClass("fixedTop").css({"height":200,"width":300,"left":"auto","right":0,"top":"auto","bottom":250})}else{d.removeClass("fixedTop").removeAttr("style").height(a)}})}gwc.browseRecordDataStorage();$(".play_box").load(function(){$(".play_waiting_cover").hide()})}}$(".performer_row .fa").click(function(){$(this).toggleClass("absolute").prev().toggleClass("ellipsis-one");if($(this).hasClass("fa-angle-down")){$(this).removeClass("fa-angle-down").addClass("fa-angle-up");var c=$(this).parents(".nowrap-row");var a=c.find("label");var b=c.find("span");c.height(b.height()+15)}else{$(this).removeClass("fa-angle-up").addClass("fa-angle-down");$(this).parents(".nowrap-row").removeAttr("style").find("label").removeAttr("style")}});new Swiper(".resource-box-nav",{slidesPerView:"auto",spaceBetween:0,freeMode:true});$(".resource-box-nav .tab-nav").click(function(){var a=$(this).parent().index();$(this).parent().addClass("active").siblings().removeClass("active");var b=$(".resource-box .rb-item").eq($(this).parent().index());b.show().siblings().hide();getTargetRsBoxData(b,a,1);backInitRsViewModel(a)});$(".resource-box .item-name").click(function(){if($(this).next().is(":visible")){if(gwc.winWidth>768){$(this).next().slideUp()}else{$(this).next().hide()}}else{if(gwc.winWidth>768){$(this).next().slideDown().parent().siblings().find(".item-name").next().slideUp()}else{$(this).next().show().parent().siblings().find(".item-name").next().hide()}}var a=$(this).parent().index();getTargetRsBoxData($(this).parent(),a,0);$(".resource-box .hd .swiper-slide").eq(a).addClass("active").siblings().removeClass("active");slideNavAutoPosition(".resource-box-nav .swiper-wrapper")});function getTargetRsBoxData(d,a,b){ids=Array.isArray(ids)?ids[0]+"-"+ids[1]:ids;if(d.find(".episodes-list").length==0&&d.find(".preloader").length==0){d.append(gwc.preloader);var c=setInterval(function(){if(backData){clearInterval(c);c=null;if(backData.hasOwnProperty("type")){var e=backData.type}else{e=backData.data.type}var f=$.ajax({url:"/common/api_getTargetRsBoxData.php",type:"post",dataType:"json",timeout:10000,data:{order:"getTargetRsBoxData",ids:ids,type:e,index:a},success:function(g){renderTargetRsBoxData(g.data,d,a,b)},error:function(g){console.log(g);d.find(".preloader").remove()},complete:function(h,g){if(g=="timeout"){f.abort();d.find(".preloader").remove()}}})}},10)}}function renderTargetRsBoxData(g,f,b,e){var d='<ul class="episodes-list">';var a=Array.isArray(ids)?ids.join("-"):ids;for(var c=0;c<g.episodes.length;c++){d+='<li><a href="/movie/'+a+".html&play="+b+"-"+c+'" class="btn btn-success play-btn" rel="nofollow" data-id="'+a+'" data-siteid="'+g.siteid+'" data-movieid="'+g.movieid+'" data-rp0="'+b+'" data-rp1="'+c+'" data-ispass="'+g.ispass+'">'+g.episodes[c].title+"</a></li>"}d+="</ul>";f.find(".preloader").remove();f.find("ul").length==0&&f.append(d).siblings().find(".item-name").next().slideUp();rp0&&resourceBtnActiveCtrlAfterRender(b);sessionStorage.setItem("haitumlocalRs",JSON.stringify({ids:a,data:g,index:b,isActiveCtrl:e}))}function resourceBtnActiveCtrlAfterRender(c){var f=document.querySelectorAll(".resource-box .hd .swiper-slide");var b=document.querySelectorAll(".resource-box .bd .rb-item");var a=c?c:rp0;if(a<f.length){for(var d=0;d<b.length;d++){if(d==rp0){var e=b[d].getElementsByClassName("play-btn");if(rp1<e.length){var g=e[rp1];g&&g.setAttribute("class","btn btn-success play-btn active");g&&g.setAttribute("title","当前正在播放")}}}}}rp0&&resourceBtnActiveCtrl();function resourceBtnActiveCtrl(c){var f=document.querySelectorAll(".resource-box .hd .swiper-slide");var b=document.querySelectorAll(".resource-box .bd .rb-item");var a=c?c:rp0;if(a<f.length){for(var d=0;d<b.length;d++){f[d].setAttribute("class","swiper-slide");f[a].setAttribute("class","swiper-slide active");b[d].style.display="none";b[a].style.display="block";if(d==rp0){var e=b[d].getElementsByClassName("play-btn");if(rp1<e.length){var g=e[rp1];g&&g.setAttribute("class","btn btn-success play-btn active");g&&g.setAttribute("title","当前正在播放")}}}}}function slideNavAutoPosition(z){var n=document.querySelector(z);var s=window.innerWidth;if(s<=768){n.parentNode.style.width=(s-30)+"px"}var o=n.offsetWidth;var v=n.getElementsByClassName("active")[0];var q=y();if(v&&q>o){var u=v.offsetLeft;var r=q-v.offsetLeft-v.offsetWidth;var p=o/2;if(r<p){n.style.transform="translate3d("+-(q-o)+"px,0px,0px)"
}else{if(u<p){n.style.transform="translate3d(0px,0px,0px)"}else{if(u>=p){var t=v.offsetWidth;var w=u+t/2;var x=w-p;n.style.transform="translate3d("+-x+"px,0px,0px)"}}}}function y(){var b=0;var a=n.getElementsByClassName("swiper-slide");for(var c=0;c<a.length;c++){b+=a[c].offsetWidth}return b}}function backInitRsViewModel(a){$(".toggle-btn").attr("data-model","window").find("em").text("展开全部资源").next().removeClass("fa-angle-double-up").addClass("fa-angle-double-down");$(".resource-box").removeClass("window").find(".rb-item").each(function(){$(this).find(".line-number").remove();if($(this).index()==a){$(this).show().find(".episodes-list").show()}else{$(this).hide().find(".episodes-list").show()}})}$(".toggle-btn").click(function(){var c=$(this).attr("data-model");var a=$(".resource-box .hd .swiper-slide.active").index();if(c=="window"){$(this).attr("data-model","list");$(this).find("em").text("收起为TAB橱窗");$(this).find(".fa").removeClass("fa-angle-double-down").addClass("fa-angle-double-up");var b=$(".resource-box .hd .swiper-slide a");$(".resource-box").addClass("window").find(".rb-item").show().each(function(){var f=$(this).index();var h=$(this).find(".item-name");if(h.find(".line-number").length==0){if(rp0&&f==rp0){var g='<i class="fa fa-play-circle"></i> ';h.addClass("active")}else{g=""}h.prepend('<sapn class="line-number">'+g+b.eq(f).text()+"</sapn>")}if(f==a){$(this).find(".episodes-list").slideDown()}else{$(this).find(".episodes-list").slideUp()}})}else{backInitRsViewModel(a);var d=$(".resource-box").offset().top-100;var e=gwc.winWidth>768?666:0;$("html,body").animate({scrollTop:d},e)}});$(".main-content .cover").click(function(){var a=$(".main-content");if(a.hasClass("fold")){a.removeClass("fold").addClass("open");$(this).find(".fa").removeClass("fa-angle-double-down").addClass("fa-angle-double-up");$(this).find("em").text("收起主题")}else{a.removeClass("open").addClass("fold");$(this).find(".fa").removeClass("fa-angle-double-up").addClass("fa-angle-double-down");$(this).find("em").text("展开主题")}});$(".comment").click(function(){var a=gwc.winWidth>768?666:0;$("html,body").animate({scrollTop:$(".comment-list").offset().top},a)});var rbItemArr=$(".resource-box .rb-item");if(rbItemArr.length>2){var rbItemAarr=rbItemArr.find(".item-name a");var rbItemAarrTxt=rbItemAarr.text();if(rbItemAarrTxt.match(/国语/)&&rbItemAarrTxt.match(/粤语/)){renderLangCtrl("只看国语","只看粤语")}else{if(rbItemAarrTxt.match(/国语/)){renderLangCtrl("只看国语","不看国语")}}function renderLangCtrl(b,a){$(".toggle-btn").addClass("fr");$(".toggle-wrap").prepend('<span class="fl"><a href="javascript:;" class="just-see-one">'+b+'</a> / <a href="javascript:;" class="just-see-one">'+a+"</a></span>");$(".just-see-one").click(function(){$(".just-see-one").removeAttr("style");$(this).css({"color":"#d04341","font-weight":"bold"});var c=$(this).text();var e=c.replace(/只看|不看/,"");var d=$(".resource-box .hd .swiper-slide");d.show();var f=0;rbItemAarr.each(function(){var g=$(this).parents(".rb-item").index();var h=$(this).text();if(a.match(/不看/)&&c.match(/不看/)){if(h.match(new RegExp(e))){d.eq(g).hide()}else{if(!f){d.eq(g).find("a").trigger("click");f=1}}}else{if(!h.match(new RegExp(e))){d.eq(g).hide()}else{if(!f){d.eq(g).find("a").trigger("click");f=1}}}});$(".resource-box-nav .swiper-wrapper").css("transform","translate3d(0px,0px,0px)")})}}var rnd=gwc.rnd(1,3);if(rnd==1){$(".wx-focus").find("img").attr("src","/template/default/static/img/ewm_haitoody.jpg").next().text("海兔影院公众号")}else{if(rnd==2){$(".wx-focus").find("img").attr("src","/template/default/static/img/ewm_xtpk.jpg").next().text("海兔影院公众号")}else{if(rnd==3){$(".wx-focus").find("img").attr("src","/template/default/static/img/ewm_lbyy.jpg").next().text("海兔影院公众号")}}}}else{if($("body").attr("class").match(/search|lyb|ranklist|special|dbm|user/)){getAjaxData("",function(a){})}}}}}}$(function(){function c(){var e=false;$("head>script").each(function(){if($(this).attr("src")&&$(this).attr("src").indexOf("d91bd9f22a0064c73796c0de6831474b")>-1){e=true}});return e}if(gwc.locationHref.match(/haitum\.com|haitu\.com/)&&!c()){var d=d||[];(function(){var f=document.createElement("script");f.src="https://hm.baidu.com/hm.js?d91bd9f22a0064c73796c0de6831474b";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(f,e)})()}else{if(gwc.locationHref.match(/haitum\.cn|haituw\.com|haitur\.com|haituyingyuan\.com|haitudy\.com|haitu\.cn/)){var d=d||[];(function(){var f=document.createElement("script");f.src="https://hm.baidu.com/hm.js?0ddfff5a7404b56fbab18e375ac027df";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(f,e)})()}}if(gwc.winWidth<768){var a=0;var b=setInterval(function(){a++;if(a>1&&$(".float-box").next().length==0){clearInterval(b);b=null;var f=$("a");f.removeAttr("target");if($("#nickname").attr("data-id")){var e=[];f.each(function(){if(!$(this).parents(".main").length){e.push($(this).height())}});e.sort(function(h,g){return g-h});e=e.slice(0,3);if(e[0]>100){gwc.body.append('<p style="position:fixed;height:0px;width:100%;background: rgba(255,255,255,0.3);box-shadow: 0 0 2px 1px rgba(208,67,65,0.3);;bottom:'+e[0]+'px;"></p>')
}}}else{$(".float-box").appendTo(gwc.body)}},1000)}});